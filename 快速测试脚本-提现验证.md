# å¿«é€Ÿæµ‹è¯•è„šæœ¬ - æç°éªŒè¯

## ğŸ“‹ ä½¿ç”¨è¯´æ˜

è¿™ä¸ªè„šæœ¬å¸®åŠ©æ‚¨å¿«é€Ÿæ”¶é›†æç°å‰åçš„æ•°æ®,éªŒè¯è®¡ç®—æ˜¯å¦æ­£ç¡®ã€‚

**æµ‹è¯•ç”¨æˆ·**ï¼š`0xd2d24d6839e26a87af01b621d1b2d348295fc760`

---

## ğŸ” æ­¥éª¤1ï¼šæç°å‰æ•°æ®æ”¶é›†

### 1.1 æŸ¥è¯¢æ•°æ®åº“çŠ¶æ€

```sql
-- æŸ¥è¯¢ç”¨æˆ·å½“å‰çŠ¶æ€
SELECT 
  usdt_total,
  usdt_locked,
  energy_total,
  energy_locked,
  last_settlement_time,
  rat_balance_wei,
  CAST(rat_balance_wei AS NUMERIC) / 1e18 as rat_balance,
  updated_at
FROM users 
WHERE LOWER(address) = LOWER('0xd2d24d6839e26a87af01b621d1b2d348295fc760');
```

**è®°å½•ç»“æœ**ï¼š
```
usdt_total: 24.0807 USDT
energy_total: 157
last_settlement_time: 2026-01-05 09:50:42.615+00
rat_balance: 16660.7 RAT
```

### 1.2 æŸ¥è¯¢æ€»æç°é‡‘é¢

```sql
-- æŸ¥è¯¢æ‰€æœ‰å·²å®Œæˆå’Œå¾…å¤„ç†çš„æç°
SELECT 
  SUM(CAST(amount AS NUMERIC)) as total_withdrawn,
  COUNT(*) as withdrawal_count
FROM withdrawals 
WHERE LOWER(address) = LOWER('0xd2d24d6839e26a87af01b621d1b2d348295fc760')
  AND status IN ('Completed', 'Pending');
```

**è®°å½•ç»“æœ**ï¼š
```
total_withdrawn: ________ USDT
withdrawal_count: ________ ç¬”
```

### 1.3 è°ƒç”¨åç«¯ API

```bash
# è·å–å®æ—¶æ”¶ç›Š
curl -X GET "https://api.rabbitdifi.com/asset/earnings?address=0xd2d24d6839e26a87af01b621d1b2d348295fc760"
```

**è®°å½•ç»“æœ**ï¼š
```json
{
  "pendingUsdt": "________",
  "dailyRate": ________,
  "currentTier": ________,
  "holdingDays": ________,
  "balance": "________",
  "grossEarnings": "________",
  "totalWithdrawn": "________"
}
```

### 1.4 å‰ç«¯æ˜¾ç¤º

**æ‰“å¼€ç”¨æˆ·å‰ç«¯é¡µé¢**ï¼š
```
https://rabbitdifi.com/
```

**è¿æ¥é’±åŒ…**ï¼š`0xd2d24d6839e26a87af01b621d1b2d348295fc760`

**è®°å½•æ˜¾ç¤ºå€¼**ï¼š
```
æµåŠ¨æ€§æ”¶ç›Šæ± : $________ USDT
é¢„è®¡æ¯æ—¥æ”¶ç›Š: $________ USDT
èƒ½é‡å€¼: ________ âš¡
æŒå¸å¤©æ•°: ________ å¤©
```

---

## ğŸ’° æ­¥éª¤2ï¼šæ‰§è¡Œæç°

### 2.1 æç°æ“ä½œ

**å»ºè®®æç°é‡‘é¢**ï¼š**2 USDT**

**å‰ç«¯æ“ä½œ**ï¼š
1. ç‚¹å‡»"æç°"æŒ‰é’®
2. è¾“å…¥é‡‘é¢ï¼š`2`
3. ç¡®è®¤æç°
4. ç­‰å¾…äº¤æ˜“ç¡®è®¤

### 2.2 è®°å½•æç°æ—¶é—´

```
æç°ç”³è¯·æ—¶é—´: ________________
æç°å®Œæˆæ—¶é—´: ________________
```

---

## ğŸ” æ­¥éª¤3ï¼šæç°åæ•°æ®æ”¶é›†

### 3.1 æŸ¥è¯¢æ•°æ®åº“çŠ¶æ€ï¼ˆæç°å®Œæˆåç«‹å³æ‰§è¡Œï¼‰

```sql
-- æŸ¥è¯¢ç”¨æˆ·æç°åçŠ¶æ€
SELECT 
  usdt_total,
  usdt_locked,
  energy_total,
  energy_locked,
  last_settlement_time,
  updated_at
FROM users 
WHERE LOWER(address) = LOWER('0xd2d24d6839e26a87af01b621d1b2d348295fc760');
```

**è®°å½•ç»“æœ**ï¼š
```
usdt_total: ________ USDT (é¢„æœŸ: çº¦ 22.10 USDT)
usdt_locked: ________ USDT (é¢„æœŸ: 0 USDT)
energy_total: ________ (é¢„æœŸ: 137)
energy_locked: ________ (é¢„æœŸ: 0)
last_settlement_time: ________________ (é¢„æœŸ: ä¿æŒä¸å˜)
```

### 3.2 æŸ¥è¯¢æç°è®°å½•

```sql
-- æŸ¥è¯¢æœ€æ–°æç°è®°å½•
SELECT 
  id,
  amount,
  status,
  created_at,
  updated_at
FROM withdrawals 
WHERE LOWER(address) = LOWER('0xd2d24d6839e26a87af01b621d1b2d348295fc760')
ORDER BY created_at DESC
LIMIT 1;
```

**è®°å½•ç»“æœ**ï¼š
```
amount: ________ USDT
status: ________
created_at: ________________
updated_at: ________________
```

### 3.3 è°ƒç”¨åç«¯ APIï¼ˆæç°å®Œæˆåï¼‰

```bash
# è·å–å®æ—¶æ”¶ç›Š
curl -X GET "https://api.rabbitdifi.com/asset/earnings?address=0xd2d24d6839e26a87af01b621d1b2d348295fc760"
```

**è®°å½•ç»“æœ**ï¼š
```json
{
  "pendingUsdt": "________",  // é¢„æœŸ: çº¦ 8.36-8.38 USDT
  "dailyRate": ________,
  "currentTier": ________,
  "totalWithdrawn": "________"  // é¢„æœŸ: æ€»æç°é‡‘é¢ + 2
}
```

### 3.4 å‰ç«¯æ˜¾ç¤ºï¼ˆåˆ·æ–°é¡µé¢ï¼‰

**è®°å½•æ˜¾ç¤ºå€¼**ï¼š
```
æµåŠ¨æ€§æ”¶ç›Šæ± : $________ USDT (é¢„æœŸ: çº¦ 8.36-8.38 USDT)
èƒ½é‡å€¼: ________ âš¡ (é¢„æœŸ: 137)
```

---

## âœ… æ­¥éª¤4ï¼šéªŒè¯è®¡ç®—

### 4.1 éªŒè¯ usdt_total æ‰£é™¤

**è®¡ç®—å…¬å¼**ï¼š
```
æç°å‰å¢é‡æ”¶ç›Š = RATä½™é¢ Ã— 0.01 Ã— 0.02 Ã— (æç°æ—¶é—´ - last_settlement_time) / 86400000
å®æ—¶æ€»æ”¶ç›Š = usdt_total + å¢é‡æ”¶ç›Š
æ–°çš„ usdt_total = å®æ—¶æ€»æ”¶ç›Š - æç°é‡‘é¢
```

**éªŒè¯**ï¼š
```
æç°å‰ usdt_total: 24.0807 USDT
æç°é‡‘é¢: 2 USDT
é¢„æœŸæ–° usdt_total: ________ USDT (è®¡ç®—å€¼)
å®é™…æ–° usdt_total: ________ USDT (æ•°æ®åº“å€¼)
å·®å¼‚: ________ USDT (åº” < 0.01 USDT)
```

â˜ **é€šè¿‡** / â˜ **å¤±è´¥**

### 4.2 éªŒè¯ last_settlement_time ä¿ç•™

**éªŒè¯**ï¼š
```
æç°å‰ last_settlement_time: 2026-01-05 09:50:42.615+00
æç°å last_settlement_time: ________________
```

â˜ **é€šè¿‡**ï¼ˆä¿æŒä¸å˜ï¼‰/ â˜ **å¤±è´¥**ï¼ˆè¢«é‡ç½®ï¼‰

### 4.3 éªŒè¯èƒ½é‡å€¼æ‰£é™¤

**è®¡ç®—å…¬å¼**ï¼š
```
æ‰£é™¤èƒ½é‡ = Math.ceil(æç°é‡‘é¢ Ã— 10) = Math.ceil(2 Ã— 10) = 20
```

**éªŒè¯**ï¼š
```
æç°å‰ energy_total: 157
æç°é‡‘é¢: 2 USDT
æ‰£é™¤èƒ½é‡: 20
é¢„æœŸæ–° energy_total: 137
å®é™…æ–° energy_total: ________
```

â˜ **é€šè¿‡** / â˜ **å¤±è´¥**

### 4.4 éªŒè¯å‰ç«¯æ˜¾ç¤º

**éªŒè¯**ï¼š
```
API pendingUsdt: ________ USDT
å‰ç«¯"æµåŠ¨æ€§æ”¶ç›Šæ± ": ________ USDT
å·®å¼‚: ________ USDT (åº” < 0.01 USDT)
```

â˜ **é€šè¿‡** / â˜ **å¤±è´¥**

### 4.5 éªŒè¯æ— é‡å¤æ‰£é™¤

**æŸ¥è¯¢ SQL**ï¼š
```sql
-- æŸ¥çœ‹æç°è®°å½•å’Œç”¨æˆ·æ•°æ®çš„æ›´æ–°æ—¶é—´
SELECT 
    w.id,
    w.amount,
    w.status,
    w.created_at as withdraw_created,
    w.updated_at as withdraw_completed,
    u.usdt_total,
    u.updated_at as user_updated
FROM withdrawals w
JOIN users u ON LOWER(w.address) = LOWER(u.address)
WHERE LOWER(w.address) = LOWER('0xd2d24d6839e26a87af01b621d1b2d348295fc760')
ORDER BY w.created_at DESC
LIMIT 1;
```

**éªŒè¯**ï¼š
```
withdraw_created: ________________ (æç°ç”³è¯·æ—¶é—´)
withdraw_completed: ________________ (æç°å®Œæˆæ—¶é—´)
user_updated: ________________ (ç”¨æˆ·æ•°æ®æ›´æ–°æ—¶é—´)
```

**é¢„æœŸ**ï¼š
- `user_updated` åº”è¯¥æ¥è¿‘ `withdraw_created`ï¼ˆåœ¨ `applyWithdraw` æ—¶æ›´æ–°ï¼‰
- åœ¨ `withdraw_completed` æ—¶ï¼Œ`usdt_total` ä¸åº”å†å˜åŒ–

â˜ **é€šè¿‡** / â˜ **å¤±è´¥**

---

## ğŸ“Š æµ‹è¯•ç»“æœæ±‡æ€»

### æµ‹è¯•ä¿¡æ¯

| é¡¹ç›® | å€¼ |
|------|-----|
| æµ‹è¯•æ—¶é—´ | ________________ |
| æµ‹è¯•äººå‘˜ | ________________ |
| æç°é‡‘é¢ | 2 USDT |
| æç°å‰ usdt_total | 24.0807 USDT |
| æç°å usdt_total | ________ USDT |

### éªŒè¯ç»“æœ

| éªŒè¯é¡¹ | çŠ¶æ€ | å¤‡æ³¨ |
|--------|------|------|
| usdt_total æ‰£é™¤æ­£ç¡® | â˜ é€šè¿‡ / â˜ å¤±è´¥ | ________________ |
| last_settlement_time ä¿ç•™ | â˜ é€šè¿‡ / â˜ å¤±è´¥ | ________________ |
| èƒ½é‡å€¼æ‰£é™¤æ­£ç¡® | â˜ é€šè¿‡ / â˜ å¤±è´¥ | ________________ |
| å‰ç«¯æ˜¾ç¤ºå‡†ç¡® | â˜ é€šè¿‡ / â˜ å¤±è´¥ | ________________ |
| æ— é‡å¤æ‰£é™¤ | â˜ é€šè¿‡ / â˜ å¤±è´¥ | ________________ |

### æ€»ä½“ç»“è®º

â˜ **æµ‹è¯•é€šè¿‡** - æ‰€æœ‰éªŒè¯é¡¹éƒ½é€šè¿‡

â˜ **æµ‹è¯•å¤±è´¥** - å­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š
```
1. ________________
2. ________________
3. ________________
```

---

## ğŸš¨ å¦‚æœæµ‹è¯•å¤±è´¥

### å¸¸è§é—®é¢˜æ’æŸ¥

**é—®é¢˜1ï¼šusdt_total æ‰£é™¤ä¸æ­£ç¡®**

å¯èƒ½åŸå› ï¼š
- å¢é‡æ”¶ç›Šè®¡ç®—é”™è¯¯
- `last_settlement_time` æœªæ­£ç¡®ä¿ç•™
- æç°æ—¶é€»è¾‘æœ‰è¯¯

æ’æŸ¥ SQLï¼š
```sql
-- æŸ¥çœ‹ç”¨æˆ·è¯¦ç»†æ•°æ®
SELECT * FROM users 
WHERE LOWER(address) = LOWER('0xd2d24d6839e26a87af01b621d1b2d348295fc760');

-- æŸ¥çœ‹æœ€è¿‘çš„æç°è®°å½•
SELECT * FROM withdrawals 
WHERE LOWER(address) = LOWER('0xd2d24d6839e26a87af01b621d1b2d348295fc760')
ORDER BY created_at DESC
LIMIT 5;
```

**é—®é¢˜2ï¼šlast_settlement_time è¢«é‡ç½®**

è¿™è¡¨ç¤ºä»£ç ä¿®å¤å¯èƒ½æœªç”Ÿæ•ˆã€‚æ£€æŸ¥ï¼š
```typescript
// rabbit-ai-backend/src/services/withdraw.ts
// applyWithdraw å‡½æ•°ä¸­åº”è¯¥ä¿ç•™ last_settlement_time
```

**é—®é¢˜3ï¼šå‰ç«¯æ˜¾ç¤ºä¸åç«¯ä¸ä¸€è‡´**

å¯èƒ½åŸå› ï¼š
- å‰ç«¯ç¼“å­˜æœªæ¸…é™¤
- API è¿”å›å»¶è¿Ÿ
- å‰ç«¯è®¡ç®—é€»è¾‘é”™è¯¯

è§£å†³æ–¹æ³•ï¼š
1. æ¸…é™¤æµè§ˆå™¨ç¼“å­˜ï¼ˆCtrl+Shift+Deleteï¼‰
2. ç­‰å¾… 5-10 ç§’ååˆ·æ–°
3. ç›´æ¥è°ƒç”¨ API éªŒè¯åç«¯æ•°æ®

---

**æµ‹è¯•è„šæœ¬åˆ›å»ºæ—¶é—´**ï¼š2026-01-05  
**ç‰ˆæœ¬**ï¼šv1.0  
**æµ‹è¯•ç”¨æˆ·**ï¼š`0xd2d24d6839e26a87af01b621d1b2d348295fc760`

