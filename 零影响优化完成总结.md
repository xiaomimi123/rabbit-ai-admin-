# é›¶å½±å“ä¼˜åŒ–å®Œæˆæ€»ç»“

## âœ… å·²å®Œæˆçš„å·¥ä½œ

### 1. åˆ›å»ºå…¬å…± Hooks

#### `hooks/usePagination.ts`
- **åŠŸèƒ½**: ç»Ÿä¸€çš„åˆ†é¡µç®¡ç† Hook
- **ç‰¹æ€§**:
  - è‡ªåŠ¨è®¡ç®— offset å’Œ totalPages
  - æä¾› nextPageã€prevPageã€goToPage æ–¹æ³•
  - æ”¯æŒé‡ç½®å’ŒçŠ¶æ€ç®¡ç†
- **ä½¿ç”¨ç¤ºä¾‹**:
```typescript
const pagination = usePagination({ pageSize: 50 });
// pagination.page, pagination.offset, pagination.totalPages ç­‰
```

#### `hooks/useAutoRefresh.ts`
- **åŠŸèƒ½**: è‡ªåŠ¨åˆ·æ–°æ•°æ® Hook
- **ç‰¹æ€§**:
  - å¯é…ç½®åˆ·æ–°é—´éš”
  - æ”¯æŒå¯ç”¨/ç¦ç”¨
  - æä¾›æ‰‹åŠ¨åˆ·æ–°æ–¹æ³•
  - é˜²æ­¢é‡å¤åˆ·æ–°
- **ä½¿ç”¨ç¤ºä¾‹**:
```typescript
const { refresh, isRefreshing } = useAutoRefresh({
  enabled: true,
  interval: 15000,
  onRefresh: fetchData,
});
```

---

### 2. åˆ›å»ºå…¬å…±ç»„ä»¶

#### `components/ErrorBoundary.tsx`
- **åŠŸèƒ½**: å…¨å±€é”™è¯¯è¾¹ç•Œç»„ä»¶
- **ç‰¹æ€§**:
  - æ•è· React ç»„ä»¶æ ‘ä¸­çš„é”™è¯¯
  - æ˜¾ç¤ºå‹å¥½çš„é”™è¯¯ç•Œé¢
  - å¼€å‘ç¯å¢ƒæ˜¾ç¤ºè¯¦ç»†é”™è¯¯ä¿¡æ¯
  - æä¾›é‡æ–°åŠ è½½åŠŸèƒ½
- **å·²é›†æˆ**: å·²åœ¨ `App.tsx` ä¸­åŒ…è£¹æ•´ä¸ªåº”ç”¨

#### `components/Loading.tsx`
- **åŠŸèƒ½**: ç»Ÿä¸€çš„åŠ è½½ç»„ä»¶
- **åŒ…å«ç»„ä»¶**:
  - `Loading` - åŸºç¡€åŠ è½½ç»„ä»¶ï¼ˆspinnerã€dotsã€skeletonï¼‰
  - `TableSkeleton` - è¡¨æ ¼éª¨æ¶å±
  - `CardSkeleton` - å¡ç‰‡éª¨æ¶å±
- **ä½¿ç”¨ç¤ºä¾‹**:
```typescript
<Loading type="spinner" message="åŠ è½½ä¸­..." />
<TableSkeleton rows={5} cols={4} />
<CardSkeleton count={4} />
```

#### `components/EmptyState.tsx`
- **åŠŸèƒ½**: ç©ºçŠ¶æ€ç»„ä»¶
- **ç‰¹æ€§**:
  - æ”¯æŒå¤šç§å˜ä½“ï¼ˆdefaultã€searchã€databaseã€errorï¼‰
  - å¯è‡ªå®šä¹‰å›¾æ ‡ã€æ ‡é¢˜ã€æè¿°
  - æ”¯æŒæ“ä½œæŒ‰é’®
- **ä½¿ç”¨ç¤ºä¾‹**:
```typescript
<EmptyState
  variant="search"
  title="æœªæ‰¾åˆ°ç»“æœ"
  description="è¯·å°è¯•å…¶ä»–æœç´¢æ¡ä»¶"
  action={<button>æ¸…é™¤ç­›é€‰</button>}
/>
```

#### `components/ActionButton.tsx`
- **åŠŸèƒ½**: ç»Ÿä¸€çš„æ“ä½œæŒ‰é’®ç»„ä»¶
- **ç‰¹æ€§**:
  - æ”¯æŒåŠ è½½çŠ¶æ€
  - å¤šç§æ ·å¼å˜ä½“ï¼ˆprimaryã€dangerã€secondaryã€ghostï¼‰
  - å¤šç§å°ºå¯¸ï¼ˆsmã€mdã€lgï¼‰
- **ä½¿ç”¨ç¤ºä¾‹**:
```typescript
<ActionButton
  variant="primary"
  loading={isSubmitting}
  onClick={handleSubmit}
>
  æäº¤
</ActionButton>
```

---

## ğŸ“ æ–‡ä»¶ç»“æ„

```
rabbit-ai-admin/
â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ index.ts              # Hooks ç»Ÿä¸€å¯¼å‡º
â”‚   â”œâ”€â”€ usePagination.ts      # åˆ†é¡µç®¡ç† Hook
â”‚   â””â”€â”€ useAutoRefresh.ts     # è‡ªåŠ¨åˆ·æ–° Hook
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ ErrorBoundary.tsx     # é”™è¯¯è¾¹ç•Œç»„ä»¶
â”‚   â”œâ”€â”€ Loading.tsx           # åŠ è½½ç»„ä»¶
â”‚   â”œâ”€â”€ EmptyState.tsx        # ç©ºçŠ¶æ€ç»„ä»¶
â”‚   â””â”€â”€ ActionButton.tsx      # æ“ä½œæŒ‰é’®ç»„ä»¶
â””â”€â”€ App.tsx                   # å·²é›†æˆ ErrorBoundary
```

---

## ğŸ¯ ä¼˜åŒ–æ•ˆæœ

### âœ… é›¶å½±å“
- æ‰€æœ‰æ–°ç»„ä»¶å’Œ Hooks éƒ½æ˜¯æ–°å¢çš„
- æ²¡æœ‰ä¿®æ”¹ä»»ä½•ç°æœ‰ä»£ç é€»è¾‘
- ç°æœ‰åŠŸèƒ½å®Œå…¨ä¸å—å½±å“
- å¯ä»¥éšæ—¶ä½¿ç”¨æ–°ç»„ä»¶ï¼Œä¹Ÿå¯ä»¥ç»§ç»­ä½¿ç”¨æ—§ä»£ç 

### ğŸ“ˆ å¸¦æ¥çš„å¥½å¤„
1. **ä»£ç å¤ç”¨**: å‡å°‘é‡å¤ä»£ç 
2. **ä¸€è‡´æ€§**: ç»Ÿä¸€çš„ UI ç»„ä»¶å’Œäº¤äº’æ¨¡å¼
3. **å¯ç»´æŠ¤æ€§**: é›†ä¸­ç®¡ç†ï¼Œæ˜“äºä¿®æ”¹
4. **å¼€å‘æ•ˆç‡**: æ–°åŠŸèƒ½å¯ä»¥ç›´æ¥ä½¿ç”¨è¿™äº›ç»„ä»¶

---

## ğŸ“ ä¸‹ä¸€æ­¥ä½¿ç”¨å»ºè®®

### é˜¶æ®µ 1: åœ¨æ–°åŠŸèƒ½ä¸­ä½¿ç”¨ï¼ˆæ¨èï¼‰
- æ–°å¼€å‘çš„é¡µé¢ç›´æ¥ä½¿ç”¨æ–°ç»„ä»¶
- æ–°åŠŸèƒ½ä½¿ç”¨æ–°çš„ Hooks
- é€æ­¥ç§¯ç´¯ä½¿ç”¨ç»éªŒ

### é˜¶æ®µ 2: æ¸è¿›å¼æ›¿æ¢ï¼ˆå¯é€‰ï¼‰
- åœ¨ä¿®æ”¹ç°æœ‰é¡µé¢æ—¶ï¼Œé¡ºä¾¿æ›¿æ¢ä¸ºæ–°çš„ç»„ä»¶
- ä¸å¼ºåˆ¶ä¸€æ¬¡æ€§æ›¿æ¢æ‰€æœ‰ä»£ç 
- ä¿æŒå‘åå…¼å®¹

### é˜¶æ®µ 3: å®Œå…¨è¿ç§»ï¼ˆé•¿æœŸï¼‰
- æ‰€æœ‰é¡µé¢éƒ½ä½¿ç”¨æ–°ç»„ä»¶
- ç»Ÿä¸€ä»£ç é£æ ¼
- ç§»é™¤æ—§çš„é‡å¤ä»£ç 

---

## ğŸ” ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹ 1: ä½¿ç”¨ usePagination

```typescript
// æ›¿æ¢å‰
const [page, setPage] = useState(1);
const [total, setTotal] = useState(0);
const pageSize = 50;
const offset = (page - 1) * pageSize;

// æ›¿æ¢å
import { usePagination } from '../hooks';
const pagination = usePagination({ pageSize: 50 });

// ä½¿ç”¨
const data = await getVisitStats({
  limit: pagination.pageSize,
  offset: pagination.offset,
});
pagination.setTotal(data.total);
```

### ç¤ºä¾‹ 2: ä½¿ç”¨ useAutoRefresh

```typescript
// æ›¿æ¢å‰
useEffect(() => {
  fetchKPIs();
  const interval = setInterval(fetchKPIs, 15000);
  return () => clearInterval(interval);
}, []);

// æ›¿æ¢å
import { useAutoRefresh } from '../hooks';
const { refresh } = useAutoRefresh({
  enabled: true,
  interval: 15000,
  onRefresh: fetchKPIs,
});
```

### ç¤ºä¾‹ 3: ä½¿ç”¨ Loading ç»„ä»¶

```typescript
// æ›¿æ¢å‰
if (loading) {
  return <div className="animate-pulse">...</div>;
}

// æ›¿æ¢å
import { Loading, TableSkeleton } from '../components/Loading';
if (loading) {
  return <TableSkeleton rows={5} />;
}
```

### ç¤ºä¾‹ 4: ä½¿ç”¨ EmptyState

```typescript
// æ›¿æ¢å‰
if (items.length === 0) {
  return <div>æš‚æ— æ•°æ®</div>;
}

// æ›¿æ¢å
import { EmptyState } from '../components/EmptyState';
if (items.length === 0) {
  return (
    <EmptyState
      title="æš‚æ— æ•°æ®"
      description="è¿˜æ²¡æœ‰ä»»ä½•è®°å½•"
      action={<button onClick={refresh}>åˆ·æ–°</button>}
    />
  );
}
```

### ç¤ºä¾‹ 5: ä½¿ç”¨ ActionButton

```typescript
// æ›¿æ¢å‰
<button 
  disabled={isSubmitting}
  onClick={handleSubmit}
  className="px-4 py-2 bg-emerald-500..."
>
  {isSubmitting ? 'æäº¤ä¸­...' : 'æäº¤'}
</button>

// æ›¿æ¢å
import { ActionButton } from '../components/ActionButton';
<ActionButton
  variant="primary"
  loading={isSubmitting}
  onClick={handleSubmit}
>
  æäº¤
</ActionButton>
```

---

## âœ… éªŒè¯æ¸…å•

- [x] æ‰€æœ‰æ–°æ–‡ä»¶å·²åˆ›å»º
- [x] ErrorBoundary å·²é›†æˆåˆ° App.tsx
- [x] æ‰€æœ‰ç»„ä»¶éƒ½æœ‰ TypeScript ç±»å‹å®šä¹‰
- [x] æ‰€æœ‰ç»„ä»¶éƒ½æœ‰ JSDoc æ³¨é‡Š
- [x] ä»£ç æ—  lint é”™è¯¯
- [x] æ–‡ä»¶ç»“æ„æ¸…æ™°
- [x] å¯¼å‡ºæ–‡ä»¶å·²åˆ›å»ºï¼ˆhooks/index.tsï¼‰

---

## ğŸš€ éƒ¨ç½²å»ºè®®

### å®‰å…¨éƒ¨ç½²æ­¥éª¤

1. **æœ¬åœ°æµ‹è¯•**
   ```bash
   npm run dev
   # æµ‹è¯•æ‰€æœ‰æ–°ç»„ä»¶æ˜¯å¦æ­£å¸¸å·¥ä½œ
   ```

2. **æ„å»ºæµ‹è¯•**
   ```bash
   npm run build
   # ç¡®ä¿æ„å»ºæˆåŠŸ
   ```

3. **æäº¤ä»£ç **
   ```bash
   git add .
   git commit -m "feat: æ·»åŠ é›¶å½±å“ä¼˜åŒ– - å…¬å…±ç»„ä»¶å’Œ Hooks"
   git push
   ```

4. **éƒ¨ç½²éªŒè¯**
   - éƒ¨ç½²åéªŒè¯ç°æœ‰åŠŸèƒ½æ­£å¸¸
   - éªŒè¯ ErrorBoundary æ­£å¸¸å·¥ä½œ
   - æ–°ç»„ä»¶å¯ä»¥åœ¨æ–°åŠŸèƒ½ä¸­ä½¿ç”¨

---

## ğŸ“Š ä»£ç ç»Ÿè®¡

- **æ–°å¢æ–‡ä»¶**: 8 ä¸ª
- **æ–°å¢ä»£ç è¡Œæ•°**: ~600 è¡Œ
- **æ–°å¢ç»„ä»¶**: 4 ä¸ª
- **æ–°å¢ Hooks**: 2 ä¸ª
- **ä¿®æ”¹æ–‡ä»¶**: 1 ä¸ªï¼ˆApp.tsxï¼Œä»…æ·»åŠ  ErrorBoundaryï¼‰

---

## ğŸ‰ æ€»ç»“

âœ… **é›¶å½±å“ä¼˜åŒ–å·²å®Œæˆ**

- æ‰€æœ‰æ–°ç»„ä»¶å’Œ Hooks éƒ½æ˜¯æ–°å¢çš„
- æ²¡æœ‰ç ´åä»»ä½•ç°æœ‰åŠŸèƒ½
- å¯ä»¥ç«‹å³ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥é€æ­¥è¿ç§»
- ä¸ºåç»­ä¼˜åŒ–æ‰“ä¸‹äº†è‰¯å¥½åŸºç¡€

**ä¸‹ä¸€æ­¥**: å¯ä»¥åœ¨æ–°åŠŸèƒ½ä¸­ä½¿ç”¨è¿™äº›ç»„ä»¶ï¼Œæˆ–é€‰æ‹©æ€§åœ°åœ¨ç°æœ‰é¡µé¢ä¸­æ›¿æ¢ä½¿ç”¨ã€‚

---

**å®Œæˆæ—¶é—´**: 2025-01-XX  
**çŠ¶æ€**: âœ… å·²å®Œæˆ  
**å½±å“**: âœ… é›¶å½±å“

