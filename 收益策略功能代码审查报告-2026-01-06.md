# ğŸ” æ”¶ç›Šç­–ç•¥åŠŸèƒ½ä»£ç å®¡æŸ¥æŠ¥å‘Š

**æ£€æµ‹æ—¥æœŸ**: 2026-01-06  
**æ£€æµ‹èŒƒå›´**: åå°ç®¡ç†æ”¶ç›Šç­–ç•¥é…ç½®åŠŸèƒ½ + å‰ç«¯åŒæ­¥é€»è¾‘  
**ä¸¥é‡ç¨‹åº¦**: ğŸ”´ é«˜ - å‰ç«¯æœªå®æ—¶åŒæ­¥åå°é…ç½®

---

## ğŸ“Š æ‰§è¡Œæ‘˜è¦

### âŒ æ ¸å¿ƒé—®é¢˜å‘ç°

**å‰ç«¯ç”¨æˆ·é¡µé¢ä¸ä¼šè‡ªåŠ¨åŒæ­¥åå°ä¿®æ”¹çš„æ”¶ç›Šç‡é…ç½®ï¼**

- åå°ç®¡ç†å‘˜ä¿®æ”¹æ”¶ç›Šç‡ â†’ âœ… æˆåŠŸä¿å­˜åˆ°æ•°æ®åº“
- åç«¯è®¡ç®—æ”¶ç›Š â†’ âœ… ä½¿ç”¨æ•°æ®åº“æœ€æ–°é…ç½®
- **å‰ç«¯æ˜¾ç¤ºæ”¶ç›Šç‡ â†’ âŒ ä½¿ç”¨ç¡¬ç¼–ç çš„æ—§æ•°æ®**

**å½±å“**ï¼š
- ç”¨æˆ·çœ‹åˆ°çš„æ”¶ç›Šç‡å¯èƒ½ä¸å®é™…ä¸ä¸€è‡´
- é€ æˆç”¨æˆ·ä½“éªŒå›°æƒ‘ï¼ˆ"ä¸ºä»€ä¹ˆæˆ‘çœ‹åˆ°çš„æ˜¯ 2%ï¼Œä½†å®é™…åªæœ‰ 1.5%ï¼Ÿ"ï¼‰
- å¯èƒ½å¼•å‘ç”¨æˆ·æŠ•è¯‰å’Œä¿¡ä»»é—®é¢˜

---

## ğŸ—ï¸ å½“å‰ç³»ç»Ÿæ¶æ„

### 1ï¸âƒ£ åå°ç®¡ç†é¡µé¢ï¼ˆâœ… æ­£å¸¸å·¥ä½œï¼‰

**æ–‡ä»¶**: `rabbit-ai-admin/pages/YieldStrategy.tsx`

```27:45:rabbit-ai-admin/pages/YieldStrategy.tsx
const fetchTiers = async () => {
  setLoading(true);
  try {
    const response = await getVipTiers();
    // è½¬æ¢åç«¯æ•°æ®æ ¼å¼ä¸ºå‰ç«¯æ ¼å¼
    setTiers(response.tiers.map((tier) => ({
      id: tier.level,
      level: `LV${tier.level}`,
      name: tier.name,
      min_hold: parseFloat(tier.minBalance),
      daily_rate: tier.dailyRate * 100, // åç«¯å­˜çš„æ˜¯å°æ•°ï¼Œå‰ç«¯æ˜¾ç¤ºç™¾åˆ†æ¯”
    })));
  } catch (error: any) {
    console.error('è·å–ç­–ç•¥å¤±è´¥', error);
    showNotification('error', `è·å–ç­–ç•¥å¤±è´¥: ${error?.message || 'æœªçŸ¥é”™è¯¯'}`);
  } finally {
    setLoading(false);
  }
};
```

**åŠŸèƒ½æµç¨‹**ï¼š
1. é¡µé¢åŠ è½½æ—¶è°ƒç”¨ `fetchTiers()` è·å–æ•°æ®åº“é…ç½®
2. ç®¡ç†å‘˜ä¿®æ”¹åç‚¹å‡»"ä¿å­˜é…ç½®"
3. è°ƒç”¨ `updateVipTier()` API æ›´æ–°æ•°æ®åº“
4. ä¿å­˜æˆåŠŸåé‡æ–°è°ƒç”¨ `fetchTiers()` åˆ·æ–°æ˜¾ç¤º

**çŠ¶æ€**: âœ… **å®Œå…¨æ­£å¸¸**

---

### 2ï¸âƒ£ åç«¯ APIï¼ˆâœ… æ­£å¸¸å·¥ä½œï¼‰

#### API è·¯ç”±

**æ–‡ä»¶**: `rabbit-ai-backend/src/api/routes/vip.ts`

```32:48:rabbit-ai-backend/src/api/routes/vip.ts
// PUT /api/admin/vip/tiers/:level
// ç®¡ç†å‘˜æ›´æ–° VIP ç­‰çº§é…ç½®
app.put('/api/admin/vip/tiers/:level', async (req: FastifyRequest, reply: FastifyReply) => {
  if (!assertAdmin(req, reply)) return;
  const level = Number((req.params as any)?.level || 0);
  if (!Number.isInteger(level) || level < 1 || level > 4) {
    return reply.status(400).send({ ok: false, code: 'INVALID_REQUEST', message: 'Invalid level (1-4)' });
  }
  try {
    const body = req.body as any;
    const data = await updateVipTier(level, body);
    return data;
  } catch (e) {
    const err = toErrorResponse(e);
    return reply.status(400).send(err);
  }
});
```

#### æ•°æ®åº“æ›´æ–°æœåŠ¡

**æ–‡ä»¶**: `rabbit-ai-backend/src/services/vip.ts`

```52:101:rabbit-ai-backend/src/services/vip.ts
// ç®¡ç†å‘˜æ›´æ–° VIP ç­‰çº§é…ç½®
export async function updateVipTier(level: number, updates: {
  name?: string;
  minBalance?: number;
  maxBalance?: number | null;
  dailyRate?: number;
  isActive?: boolean;
}) {
  // éªŒè¯é…ç½®
  if (updates.dailyRate !== undefined && (updates.dailyRate < 0 || updates.dailyRate > 20)) {
    throw new ApiError('INVALID_REQUEST', 'Daily rate must be between 0 and 20', 400);
  }

  if (updates.minBalance !== undefined && updates.minBalance < 0) {
    throw new ApiError('INVALID_REQUEST', 'Min balance must be >= 0', 400);
  }

  // æ›´æ–°æ•°æ®åº“
  const updateData: any = {
    updated_at: new Date().toISOString(),
  };

  if (updates.name !== undefined) updateData.name = updates.name;
  if (updates.minBalance !== undefined) updateData.min_balance = updates.minBalance;
  if (updates.maxBalance !== undefined) updateData.max_balance = updates.maxBalance;
  if (updates.dailyRate !== undefined) updateData.daily_rate = updates.dailyRate;
  if (updates.isActive !== undefined) updateData.is_active = updates.isActive;

  const { data, error } = await supabase
    .from('vip_tiers')
    .update(updateData)
    .eq('level', level)
    .select()
    .single();

  if (error) throw error;

  return {
    ok: true,
    tier: {
      level: data.level,
      name: data.name,
      minBalance: String(data.min_balance),
      maxBalance: data.max_balance === null ? null : String(data.max_balance),
      dailyRate: Number(data.daily_rate),
      isActive: data.is_active,
      displayOrder: data.display_order,
      updatedAt: data.updated_at,
    },
  };
}
```

**åŠŸèƒ½**ï¼š
- âœ… éªŒè¯å‚æ•°ï¼ˆæ—¥åˆ©ç‡ 0-20%ï¼Œæœ€ä½æŒä»“ â‰¥ 0ï¼‰
- âœ… æ›´æ–° Supabase `vip_tiers` è¡¨
- âœ… è¿”å›æ›´æ–°åçš„é…ç½®

**çŠ¶æ€**: âœ… **å®Œå…¨æ­£å¸¸**

---

### 3ï¸âƒ£ åç«¯æ”¶ç›Šè®¡ç®—ï¼ˆâœ… æ­£ç¡®ä½¿ç”¨æ•°æ®åº“é…ç½®ï¼‰

**æ–‡ä»¶**: `rabbit-ai-backend/src/services/earnings.ts`

åç«¯åœ¨è®¡ç®—ç”¨æˆ·æ”¶ç›Šæ—¶ï¼Œä¼šä»æ•°æ®åº“è¯»å–æœ€æ–°çš„ VIP é…ç½®ï¼š

```typescript
// ä¼ªä»£ç ç¤ºæ„ï¼ˆç®€åŒ–ï¼‰
const { data } = await supabase
  .from('vip_tiers')
  .select('*')
  .eq('is_active', true)
  .order('display_order', { ascending: true });

// æ ¹æ®ç”¨æˆ·æŒä»“åŒ¹é…ç­‰çº§
const tier = data.find(t => ratBalance >= t.min_balance && ratBalance <= t.max_balance);
const dailyRate = tier.daily_rate; // âœ… ä½¿ç”¨æ•°æ®åº“æœ€æ–°é…ç½®
```

**çŠ¶æ€**: âœ… **å®Œå…¨æ­£å¸¸**

---

### 4ï¸âƒ£ å‰ç«¯ç”¨æˆ·é¡µé¢ï¼ˆâŒ ä½¿ç”¨ç¡¬ç¼–ç æ•°æ®ï¼‰

#### é—®é¢˜ä»£ç 

**æ–‡ä»¶**: `rabbit-ai-frontendxin/constants.ts`

```54:59:rabbit-ai-frontendxin/constants.ts
export const VIP_TIERS = [
  { level: 1, name: 'ğŸŒ± Novice', min: 10000, max: 49999, dailyRate: 2 }, // 2% æ—¥åˆ©ç‡
  { level: 2, name: 'ğŸŒ¿ Advanced', min: 50000, max: 99999, dailyRate: 4 }, // 4% æ—¥åˆ©ç‡
  { level: 3, name: 'ğŸŒ³ Expert', min: 100000, max: 199999, dailyRate: 6 }, // 6% æ—¥åˆ©ç‡
  { level: 4, name: 'ğŸ’ Core', min: 200000, max: Infinity, dailyRate: 10 }, // 10% æ—¥åˆ©ç‡
];
```

**é—®é¢˜**ï¼š
- âŒ ç¡¬ç¼–ç çš„æ”¶ç›Šç‡ï¼ˆ2%, 4%, 6%, 10%ï¼‰
- âŒ æ²¡æœ‰ä»åç«¯ API è·å–æœ€æ–°é…ç½®
- âŒ ç®¡ç†å‘˜ä¿®æ”¹åï¼Œç”¨æˆ·éœ€è¦é‡æ–°éƒ¨ç½²å‰ç«¯æ‰èƒ½çœ‹åˆ°æ–°æ•°æ®

---

#### å‰ç«¯ä½¿ç”¨ä½ç½®

**æ–‡ä»¶**: `rabbit-ai-frontendxin/views/AssetView.tsx`

```823:846:rabbit-ai-frontendxin/views/AssetView.tsx
{VIP_TIERS.map((tier) => {
  const isActive = currentTier?.level === tier.level;
  const isReached = ratBalance !== null && ratBalance >= tier.min;
  const isNextTarget = !currentTier && tier.level === 1 || (currentTier && tier.level === currentTier.level + 1);
  
  // è®¡ç®—è·ç¦»æ­¤ç­‰çº§è¿˜å·®å¤šå°‘RAT
  let distanceToTier = 0;
  let progressToTier = 0;
  if (ratBalance !== null) {
    if (ratBalance < tier.min) {
      distanceToTier = tier.min - ratBalance;
      const prevTier = tier.level > 1 ? VIP_TIERS.find(t => t.level === tier.level - 1) : null;
      const rangeStart = prevTier ? prevTier.max + 1 : 0;
      const rangeEnd = tier.min;
      const range = rangeEnd - rangeStart;
      if (range > 0) {
        progressToTier = Math.min(Math.max(((ratBalance - rangeStart) / range) * 100, 0), 100);
      }
    } else if (ratBalance >= tier.min && ratBalance <= tier.max) {
      progressToTier = 100;
    } else {
      progressToTier = 100;
    }
  }
  
  return (
```

**é—®é¢˜**ï¼š
- ç›´æ¥ä½¿ç”¨ `constants.ts` ä¸­çš„ `VIP_TIERS`
- æ˜¾ç¤ºçš„ `tier.dailyRate` æ˜¯ç¡¬ç¼–ç å€¼
- ç”¨æˆ·çœ‹åˆ°çš„æ”¶ç›Šç‡æ°¸è¿œæ˜¯ 2%, 4%, 6%, 10%ï¼Œå³ä½¿ç®¡ç†å‘˜æ”¹æˆäº† 1%, 3%, 5%, 8%

**çŠ¶æ€**: âŒ **ä¸¥é‡é—®é¢˜**

---

## ğŸš¨ é—®é¢˜åœºæ™¯æ¼”ç¤º

### åœºæ™¯ 1: ç®¡ç†å‘˜è°ƒæ•´æ”¶ç›Šç‡

1. **ç®¡ç†å‘˜æ“ä½œ**ï¼š
   - åœ¨åå°ç®¡ç†ç³»ç»Ÿä¿®æ”¹ LV1 æ”¶ç›Šç‡ï¼š2% â†’ 1.5%
   - ç‚¹å‡»"ä¿å­˜é…ç½®"
   - âœ… æ•°æ®åº“æ›´æ–°æˆåŠŸ

2. **åç«¯è®¡ç®—**ï¼š
   - ç”¨æˆ· A æŒæœ‰ 15,000 RATï¼ˆLV1ï¼‰
   - åç«¯ä»æ•°æ®åº“è¯»å–ï¼š`daily_rate = 0.015`ï¼ˆ1.5%ï¼‰
   - âœ… æŒ‰ 1.5% è®¡ç®—æ”¶ç›Š

3. **å‰ç«¯æ˜¾ç¤º**ï¼š
   - ç”¨æˆ· A æ‰“å¼€èµ„äº§é¡µé¢
   - å‰ç«¯æ˜¾ç¤ºï¼šVIP LV1 - **2% æ—¥åˆ©ç‡** âŒ
   - ç”¨æˆ·å›°æƒ‘ï¼š"ä¸ºä»€ä¹ˆæˆ‘çš„å®é™…æ”¶ç›Šæ¯”æ˜¾ç¤ºçš„å°‘ï¼Ÿ"

### åœºæ™¯ 2: æ–°ç”¨æˆ·æŸ¥çœ‹æ”¶ç›Šç‡

1. **æ–°ç”¨æˆ·æ“ä½œ**ï¼š
   - æŸ¥çœ‹ VIP ç­‰çº§å¼¹çª—
   - çœ‹åˆ° LV1 æ˜¾ç¤º **2% æ—¥åˆ©ç‡**

2. **ç”¨æˆ·è´­ä¹° RAT**ï¼š
   - åŸºäº 2% çš„é¢„æœŸæŠ•èµ„

3. **å®é™…æ”¶ç›Š**ï¼š
   - åªæœ‰ 1.5%
   - ç”¨æˆ·æŠ•è¯‰ï¼š"è™šå‡å®£ä¼ ï¼"

---

## ğŸ”„ å®Œæ•´æ•°æ®æµå¯¹æ¯”

### å½“å‰æ•°æ®æµï¼ˆæœ‰é—®é¢˜ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç®¡ç†å‘˜åå°                                                   â”‚
â”‚  1. ä¿®æ”¹æ”¶ç›Šç‡ 2% â†’ 1.5%                                     â”‚
â”‚  2. ä¿å­˜åˆ°æ•°æ®åº“ âœ…                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Supabase æ•°æ®åº“                                             â”‚
â”‚  vip_tiers è¡¨                                               â”‚
â”‚  â”œâ”€ level: 1                                                â”‚
â”‚  â”œâ”€ daily_rate: 0.015  â† âœ… å·²æ›´æ–°                          â”‚
â”‚  â””â”€ updated_at: 2026-01-06                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ åç«¯è®¡ç®—æ”¶ç›Š             â”‚   â”‚ å‰ç«¯ç”¨æˆ·é¡µé¢                â”‚
â”‚  1. æŸ¥è¯¢æ•°æ®åº“           â”‚   â”‚  1. è¯»å– constants.ts       â”‚
â”‚  2. daily_rate = 0.015   â”‚   â”‚  2. dailyRate = 2  â† âŒ æ—§æ•°æ®â”‚
â”‚  3. âœ… æŒ‰ 1.5% è®¡ç®—      â”‚   â”‚  3. âŒ æ˜¾ç¤º 2%               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ç»“æœï¼šå®é™…æ”¶ç›Š 1.5%ï¼Œæ˜¾ç¤º 2% â†’ âŒ ä¸ä¸€è‡´ï¼
```

### ç†æƒ³æ•°æ®æµï¼ˆä¿®å¤åï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç®¡ç†å‘˜åå°                                                   â”‚
â”‚  1. ä¿®æ”¹æ”¶ç›Šç‡ 2% â†’ 1.5%                                     â”‚
â”‚  2. ä¿å­˜åˆ°æ•°æ®åº“ âœ…                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Supabase æ•°æ®åº“                                             â”‚
â”‚  vip_tiers è¡¨                                               â”‚
â”‚  â”œâ”€ level: 1                                                â”‚
â”‚  â”œâ”€ daily_rate: 0.015  â† âœ… å·²æ›´æ–°                          â”‚
â”‚  â””â”€ updated_at: 2026-01-06                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ åç«¯è®¡ç®—æ”¶ç›Š             â”‚   â”‚ å‰ç«¯ç”¨æˆ·é¡µé¢                â”‚
â”‚  1. æŸ¥è¯¢æ•°æ®åº“           â”‚   â”‚  1. è°ƒç”¨ /api/vip/tiers API â”‚
â”‚  2. daily_rate = 0.015   â”‚   â”‚  2. dailyRate = 1.5  â† âœ…   â”‚
â”‚  3. âœ… æŒ‰ 1.5% è®¡ç®—      â”‚   â”‚  3. âœ… æ˜¾ç¤º 1.5%             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ç»“æœï¼šå®é™…æ”¶ç›Š 1.5%ï¼Œæ˜¾ç¤º 1.5% â†’ âœ… ä¸€è‡´ï¼
```

---

## ğŸ’¡ ä¿®å¤æ–¹æ¡ˆ

### æ–¹æ¡ˆ A: å‰ç«¯åŠ¨æ€åŠ è½½ VIP é…ç½®ï¼ˆæ¨èï¼‰â­â­â­â­â­

#### ä¿®æ”¹ 1: æ·»åŠ  API è°ƒç”¨å‡½æ•°

**æ–‡ä»¶**: `rabbit-ai-frontendxin/api.ts`

```typescript
// ğŸŸ¢ æ–°å¢ï¼šè·å– VIP ç­‰çº§é…ç½®ï¼ˆç”¨æˆ·å‰ç«¯ï¼‰
export async function getVipTiers() {
  return apiFetch<{
    ok: boolean;
    tiers: Array<{
      level: number;
      name: string;
      min: number;
      max: number;
      dailyRate: number;
    }>;
  }>('/vip/tiers');
}
```

---

#### ä¿®æ”¹ 2: AssetView.tsx åŠ¨æ€åŠ è½½é…ç½®

**æ–‡ä»¶**: `rabbit-ai-frontendxin/views/AssetView.tsx`

```typescript
const AssetView: React.FC<AssetViewProps> = ({ stats, setStats }) => {
  // ... å…¶ä»–çŠ¶æ€
  
  // ğŸŸ¢ æ–°å¢ï¼šåŠ¨æ€ VIP ç­‰çº§é…ç½®
  const [vipTiers, setVipTiers] = useState<Array<{
    level: number;
    name: string;
    min: number;
    max: number;
    dailyRate: number;
  }> | null>(null);

  // ğŸŸ¢ æ–°å¢ï¼šåŠ è½½ VIP é…ç½®
  useEffect(() => {
    const loadVipTiers = async () => {
      try {
        const response = await getVipTiers();
        setVipTiers(response.tiers);
        console.log('[AssetView] âœ… å·²åŠ è½½ VIP é…ç½®:', response.tiers);
      } catch (error) {
        console.error('[AssetView] âš ï¸ åŠ è½½ VIP é…ç½®å¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤å€¼:', error);
        // é™çº§ï¼šä½¿ç”¨ constants.ts ä¸­çš„ç¡¬ç¼–ç å€¼
        setVipTiers(VIP_TIERS);
      }
    };

    loadVipTiers();
    // æ¯ 5 åˆ†é’Ÿåˆ·æ–°ä¸€æ¬¡é…ç½®ï¼ˆç®¡ç†å‘˜å¯èƒ½ä¼šè°ƒæ•´ï¼‰
    const interval = setInterval(loadVipTiers, 5 * 60 * 1000);
    return () => clearInterval(interval);
  }, []);

  // ğŸŸ¢ ä¿®æ”¹ï¼šä½¿ç”¨åŠ¨æ€é…ç½®æˆ–é™çº§åˆ°ç¡¬ç¼–ç 
  const tiersToDisplay = vipTiers || VIP_TIERS;

  // ... å…¶ä»–é€»è¾‘

  return (
    <div>
      {/* ... */}
      
      {/* ğŸŸ¢ ä¿®æ”¹ï¼šä½¿ç”¨åŠ¨æ€é…ç½® */}
      {showTierModal && createPortal(
        <div>
          {/* ... */}
          {tiersToDisplay.map((tier) => {
            // ... æ¸²æŸ“é€»è¾‘
            return (
              <div>
                {/* æ˜¾ç¤º tier.dailyRateï¼Œç°åœ¨æ˜¯å®æ—¶çš„ */}
              </div>
            );
          })}
        </div>,
        document.body
      )}
    </div>
  );
};
```

---

#### ä¿®æ”¹ 3: ç¡®ä¿åç«¯ API å¯è®¿é—®

**æ–‡ä»¶**: `rabbit-ai-backend/src/api/routes/vip.ts`

```7:17:rabbit-ai-backend/src/api/routes/vip.ts
// GET /api/vip/tiers
// å‰ç«¯è·å– VIP ç­‰çº§é…ç½®ï¼ˆåªè¿”å›å¯ç”¨çš„ï¼‰
app.get('/api/vip/tiers', async (req: FastifyRequest, reply: FastifyReply) => {
  try {
    const data = await getVipTiers();
    return data;
  } catch (e) {
    const err = toErrorResponse(e);
    return reply.status(400).send(err);
  }
});
```

âœ… **å·²å­˜åœ¨ï¼Œæ— éœ€ä¿®æ”¹**

---

### æ–¹æ¡ˆä¼˜åŠ¿

| ç‰¹æ€§ | è¯„åˆ† | è¯´æ˜ |
|------|------|------|
| **å‡†ç¡®æ€§** | â­â­â­â­â­ | å‰ç«¯å§‹ç»ˆæ˜¾ç¤ºæœ€æ–°é…ç½® |
| **å®æ—¶æ€§** | â­â­â­â­â­ | ç®¡ç†å‘˜ä¿®æ”¹åï¼Œç”¨æˆ·åˆ·æ–°é¡µé¢å³å¯çœ‹åˆ° |
| **å®¹é”™æ€§** | â­â­â­â­â­ | API å¤±è´¥æ—¶é™çº§åˆ°ç¡¬ç¼–ç å€¼ |
| **æ€§èƒ½** | â­â­â­â­ | é¢å¤– 1 æ¬¡ API è¯·æ±‚ï¼ˆå¯ç¼“å­˜ï¼‰ |
| **å®ç°éš¾åº¦** | â­â­â­â­ | ç®€å•ï¼Œçº¦ 30 è¡Œä»£ç  |

---

### æ–¹æ¡ˆ B: åç«¯è¿”å›æ”¶ç›Šç‡ï¼ˆå¤‡é€‰ï¼‰

**é€‚ç”¨åœºæ™¯**ï¼šä¸æƒ³ä¿®æ”¹å‰ç«¯å¤ªå¤šä»£ç 

#### ä¿®æ”¹åç«¯ API

åœ¨ç”¨æˆ·è·å–æ”¶ç›Šä¿¡æ¯æ—¶ï¼Œç›´æ¥è¿”å›å½“å‰ç­‰çº§çš„æ”¶ç›Šç‡ï¼š

```typescript
// ä¼ªä»£ç 
export async function calculateUserEarnings(provider, userAddress) {
  // ... è®¡ç®—é€»è¾‘
  
  const tier = await getCurrentTier(ratBalance); // ä»æ•°æ®åº“æŸ¥è¯¢
  
  return {
    pendingUsdt: '1.234',
    dailyRate: tier.daily_rate * 100, // ğŸŸ¢ ç›´æ¥è¿”å›æ•°æ®åº“çš„æœ€æ–°å€¼
    currentTier: tier.level,
    holdingDays: 10,
  };
}
```

**ä¼˜ç‚¹**ï¼š
- âœ… å‰ç«¯æ— éœ€ä¿®æ”¹å¤ªå¤š
- âœ… æ•°æ®ä¸€å®šå‡†ç¡®

**ç¼ºç‚¹**ï¼š
- âŒ ç”¨æˆ·æœªè¾¾åˆ°ç­‰çº§æ—¶ï¼Œçœ‹ä¸åˆ°å…¶ä»–ç­‰çº§çš„æ”¶ç›Šç‡
- âŒ VIP å¼¹çª—ä¸­ä»éœ€æ˜¾ç¤ºæ‰€æœ‰ç­‰çº§ï¼Œè¿˜æ˜¯éœ€è¦æ–¹æ¡ˆ A

---

## ğŸ“‹ ä¿®å¤æ­¥éª¤ï¼ˆæ–¹æ¡ˆ A å®æ–½æŒ‡å—ï¼‰

### æ­¥éª¤ 1: æ·»åŠ  API å‡½æ•°ï¼ˆå‰ç«¯ï¼‰

**ä½ç½®**: `rabbit-ai-frontendxin/api.ts`  
**è€—æ—¶**: 2 åˆ†é’Ÿ

```typescript
// åœ¨æ–‡ä»¶æœ«å°¾æ·»åŠ 
export async function getVipTiers() {
  return apiFetch<{
    ok: boolean;
    tiers: Array<{
      level: number;
      name: string;
      min: number;
      max: number;
      dailyRate: number;
    }>;
  }>('/vip/tiers');
}
```

---

### æ­¥éª¤ 2: ä¿®æ”¹ AssetView.tsx

**ä½ç½®**: `rabbit-ai-frontendxin/views/AssetView.tsx`  
**è€—æ—¶**: 10 åˆ†é’Ÿ

1. æ·»åŠ çŠ¶æ€ï¼š
```typescript
const [vipTiers, setVipTiers] = useState<typeof VIP_TIERS | null>(null);
```

2. æ·»åŠ åŠ è½½é€»è¾‘ï¼š
```typescript
useEffect(() => {
  const loadVipTiers = async () => {
    try {
      const response = await getVipTiers();
      setVipTiers(response.tiers);
    } catch (error) {
      console.error('[AssetView] Load VIP tiers failed:', error);
      setVipTiers(VIP_TIERS); // é™çº§
    }
  };
  loadVipTiers();
  const interval = setInterval(loadVipTiers, 5 * 60 * 1000);
  return () => clearInterval(interval);
}, []);
```

3. æ›¿æ¢ä½¿ç”¨ï¼š
```typescript
const tiersToDisplay = vipTiers || VIP_TIERS;
// å°†æ‰€æœ‰ VIP_TIERS æ›¿æ¢ä¸º tiersToDisplay
```

---

### æ­¥éª¤ 3: æµ‹è¯•

1. **åå°æµ‹è¯•**ï¼š
   - ä¿®æ”¹ LV1 æ”¶ç›Šç‡ï¼š2% â†’ 3%
   - ä¿å­˜æˆåŠŸ

2. **å‰ç«¯æµ‹è¯•**ï¼š
   - æ‰“å¼€èµ„äº§é¡µé¢
   - æ‰“å¼€ VIP å¼¹çª—
   - âœ… ç¡®è®¤æ˜¾ç¤º 3%

3. **å®¹é”™æµ‹è¯•**ï¼š
   - åœæ­¢åç«¯æœåŠ¡
   - åˆ·æ–°å‰ç«¯
   - âœ… ç¡®è®¤æ˜¾ç¤ºé»˜è®¤å€¼ï¼ˆ2%ï¼‰

---

### æ­¥éª¤ 4: éƒ¨ç½²

1. **å‰ç«¯**ï¼š
   ```bash
   cd rabbit-ai-frontendxin
   npm run build
   git add .
   git commit -m "feat: åŠ¨æ€åŠ è½½ VIP æ”¶ç›Šç‡é…ç½®"
   git push origin main
   ```

2. **Vercel è‡ªåŠ¨éƒ¨ç½²**ï¼š
   - ç­‰å¾… Vercel éƒ¨ç½²å®Œæˆ
   - è®¿é—®ç”Ÿäº§ç¯å¢ƒéªŒè¯

---

## âš ï¸ æ³¨æ„äº‹é¡¹

### 1. ç¼“å­˜ç­–ç•¥

**æ¨èé…ç½®**ï¼š
- æ¯ 5 åˆ†é’Ÿåˆ·æ–°ä¸€æ¬¡ï¼ˆé¿å…é¢‘ç¹è¯·æ±‚ï¼‰
- ç”¨æˆ·åˆ·æ–°é¡µé¢æ—¶ç«‹å³åŠ è½½
- è€ƒè™‘ä½¿ç”¨ `localStorage` ç¼“å­˜ï¼ˆå‡å°‘ API è°ƒç”¨ï¼‰

```typescript
useEffect(() => {
  const loadVipTiers = async () => {
    // ğŸŸ¢ ä»ç¼“å­˜è¯»å–
    const cached = localStorage.getItem('vip_tiers_cache');
    if (cached) {
      const { data, timestamp } = JSON.parse(cached);
      // ç¼“å­˜ 5 åˆ†é’Ÿå†…æœ‰æ•ˆ
      if (Date.now() - timestamp < 5 * 60 * 1000) {
        setVipTiers(data);
        return;
      }
    }

    // ğŸŸ¢ ä» API è·å–
    try {
      const response = await getVipTiers();
      setVipTiers(response.tiers);
      // ğŸŸ¢ ä¿å­˜åˆ°ç¼“å­˜
      localStorage.setItem('vip_tiers_cache', JSON.stringify({
        data: response.tiers,
        timestamp: Date.now(),
      }));
    } catch (error) {
      console.error('[AssetView] Load VIP tiers failed:', error);
      setVipTiers(VIP_TIERS);
    }
  };

  loadVipTiers();
}, []);
```

---

### 2. é™çº§ç­–ç•¥

**å½“ API å¤±è´¥æ—¶**ï¼š
- âœ… ä½¿ç”¨ `constants.ts` ä¸­çš„ç¡¬ç¼–ç å€¼
- âœ… æ˜¾ç¤ºè­¦å‘Šæç¤ºï¼š"æ”¶ç›Šç‡å¯èƒ½ä¸æ˜¯æœ€æ–°ï¼Œè¯·åˆ·æ–°é¡µé¢"
- âŒ ä¸è¦è®©é¡µé¢å´©æºƒ

---

### 3. å…¼å®¹æ€§

**ç°æœ‰ä»£ç **ï¼š
- `constants.ts` ä¸­çš„ `VIP_TIERS` ä¿ç•™ä½œä¸ºé™çº§æ–¹æ¡ˆ
- åç«¯è®¡ç®—é€»è¾‘æ— éœ€ä¿®æ”¹ï¼ˆå·²ç»ä½¿ç”¨æ•°æ®åº“ï¼‰

---

## ğŸ“Š é¢„æœŸæ•ˆæœ

### ä¿®å¤å‰

| æ“ä½œ | åç«¯è®¡ç®—æ”¶ç›Š | å‰ç«¯æ˜¾ç¤ºæ”¶ç›Šç‡ | ä¸€è‡´æ€§ |
|------|-------------|---------------|--------|
| ç®¡ç†å‘˜æ”¹ä¸º 1.5% | âœ… 1.5% | âŒ 2% | âŒ ä¸ä¸€è‡´ |
| ç®¡ç†å‘˜æ”¹ä¸º 3% | âœ… 3% | âŒ 2% | âŒ ä¸ä¸€è‡´ |

---

### ä¿®å¤å

| æ“ä½œ | åç«¯è®¡ç®—æ”¶ç›Š | å‰ç«¯æ˜¾ç¤ºæ”¶ç›Šç‡ | ä¸€è‡´æ€§ |
|------|-------------|---------------|--------|
| ç®¡ç†å‘˜æ”¹ä¸º 1.5% | âœ… 1.5% | âœ… 1.5% | âœ… ä¸€è‡´ |
| ç®¡ç†å‘˜æ”¹ä¸º 3% | âœ… 3% | âœ… 3% | âœ… ä¸€è‡´ |
| API å¤±è´¥ | âœ… 1.5% | âœ… 2%ï¼ˆé™çº§ï¼‰ | âš ï¸ æ˜¾ç¤ºè­¦å‘Š |

---

## ğŸ¯ æ€»ç»“

### æ ¸å¿ƒé—®é¢˜

å‰ç«¯ç”¨æˆ·é¡µé¢ä½¿ç”¨ç¡¬ç¼–ç çš„ VIP æ”¶ç›Šç‡é…ç½®ï¼Œå¯¼è‡´ç®¡ç†å‘˜ä¿®æ”¹åï¼Œç”¨æˆ·çœ‹åˆ°çš„ä»ç„¶æ˜¯æ—§æ•°æ®ã€‚

### æ¨èæ–¹æ¡ˆ

**æ–¹æ¡ˆ A: å‰ç«¯åŠ¨æ€åŠ è½½ VIP é…ç½®**

- âœ… å‡†ç¡®æ€§ï¼š100%
- âœ… å®æ—¶æ€§ï¼šåˆ·æ–°é¡µé¢å³å¯åŒæ­¥
- âœ… å®¹é”™æ€§ï¼šAPI å¤±è´¥æ—¶é™çº§
- âœ… å®ç°éš¾åº¦ï¼šä½ï¼ˆçº¦ 30 è¡Œä»£ç ï¼‰

### å®æ–½æ­¥éª¤

1. æ·»åŠ  API å‡½æ•°ï¼ˆ2 åˆ†é’Ÿï¼‰
2. ä¿®æ”¹ AssetView.tsxï¼ˆ10 åˆ†é’Ÿï¼‰
3. æµ‹è¯•ï¼ˆ5 åˆ†é’Ÿï¼‰
4. éƒ¨ç½²ï¼ˆ5 åˆ†é’Ÿï¼‰

**æ€»è€—æ—¶**: çº¦ 30 åˆ†é’Ÿ

### é£é™©è¯„ä¼°

| é£é™© | ç­‰çº§ | ç¼“è§£æªæ–½ |
|------|------|---------|
| API è¯·æ±‚å¤±è´¥ | ğŸŸ¡ ä¸­ | é™çº§åˆ°ç¡¬ç¼–ç å€¼ |
| ç¼“å­˜ä¸ä¸€è‡´ | ğŸŸ¢ ä½ | 5 åˆ†é’Ÿåˆ·æ–°ä¸€æ¬¡ |
| æ€§èƒ½å½±å“ | ğŸŸ¢ ä½ | åªå¢åŠ  1 æ¬¡ API è¯·æ±‚ |

---

**æŠ¥å‘Šç”Ÿæˆæ—¶é—´**: 2026-01-06  
**æ£€æµ‹å·¥å…·**: Cursor AI + äººå·¥ä»£ç å®¡æŸ¥  
**ä¸‹ä¸€æ­¥**: ç­‰å¾…ç”¨æˆ·æ‰¹å‡†åå®æ–½ä¿®å¤

