# ç®¡ç†åå°ä¼˜åŒ–å®¡æŸ¥æŠ¥å‘Š

## ğŸ“‹ æ¦‚è¿°

**å®¡æŸ¥æ—¶é—´**: 2025-01-XX  
**å®¡æŸ¥èŒƒå›´**: `rabbit-ai-admin` å®Œæ•´ä»£ç åº“  
**å®¡æŸ¥ç›®æ ‡**: è¯†åˆ«ä¼˜åŒ–æœºä¼šï¼Œæå‡ä»£ç è´¨é‡ã€æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒ

---

## ğŸ“Š é¡¹ç›®ç»“æ„åˆ†æ

### âœ… ä¼˜ç‚¹

1. **æ¸…æ™°çš„ç›®å½•ç»“æ„**
   - `pages/` - é¡µé¢ç»„ä»¶ï¼ˆ12 ä¸ªé¡µé¢ï¼‰
   - `components/` - å¯å¤ç”¨ç»„ä»¶ï¼ˆ3 ä¸ªç»„ä»¶ï¼‰
   - `lib/` - API å’Œå·¥å…·å‡½æ•°
   - `utils/` - å·¥å…·å‡½æ•°

2. **æŠ€æœ¯æ ˆé€‰æ‹©åˆç†**
   - React 19.2.3 + TypeScript
   - Vite 6.2.0ï¼ˆæ„å»ºå·¥å…·ï¼‰
   - Tailwind CSSï¼ˆæ ·å¼ï¼‰
   - React Router 7.11.0ï¼ˆè·¯ç”±ï¼‰
   - Lucide Reactï¼ˆå›¾æ ‡ï¼‰

3. **ä»£ç ç»„ç»‡è‰¯å¥½**
   - é¡µé¢ç»„ä»¶ç‹¬ç«‹
   - API è°ƒç”¨é›†ä¸­ç®¡ç†
   - ç±»å‹å®šä¹‰ç»Ÿä¸€

---

## ğŸ” ä»£ç è´¨é‡å®¡æŸ¥

### 1. é”™è¯¯å¤„ç† âš ï¸ **éœ€è¦æ”¹è¿›**

**é—®é¢˜**ï¼š
- éƒ¨åˆ†é¡µé¢ç¼ºå°‘ç»Ÿä¸€çš„é”™è¯¯å¤„ç†æœºåˆ¶
- é”™è¯¯ä¿¡æ¯æ˜¾ç¤ºä¸ä¸€è‡´ï¼ˆæœ‰äº›ç”¨ console.errorï¼Œæœ‰äº›ç”¨é€šçŸ¥ï¼‰
- ç½‘ç»œé”™è¯¯å¤„ç†ä¸å®Œå–„

**å‘ç°**ï¼š
```typescript
// âŒ é—®é¢˜ç¤ºä¾‹ï¼šDashboard.tsx
catch (error) {
  console.error('è·å– KPI å¤±è´¥', error);
  // æ²¡æœ‰ç”¨æˆ·å‹å¥½çš„é”™è¯¯æç¤º
}

// âœ… å¥½çš„ç¤ºä¾‹ï¼šUsers.tsx
catch (error) {
  showNotification('error', 'è·å–ç”¨æˆ·åˆ—è¡¨å¤±è´¥');
}
```

**å»ºè®®**ï¼š
- ç»Ÿä¸€ä½¿ç”¨ `useNotifications` Hook æ˜¾ç¤ºé”™è¯¯
- æ·»åŠ å…¨å±€é”™è¯¯è¾¹ç•Œç»„ä»¶
- åŒºåˆ†ç½‘ç»œé”™è¯¯ã€ä¸šåŠ¡é”™è¯¯ã€æƒé™é”™è¯¯

---

### 2. åŠ è½½çŠ¶æ€ âš ï¸ **éœ€è¦æ”¹è¿›**

**é—®é¢˜**ï¼š
- åŠ è½½çŠ¶æ€æ˜¾ç¤ºä¸ä¸€è‡´
- éƒ¨åˆ†é¡µé¢ç¼ºå°‘åŠ è½½éª¨æ¶å±
- æ•°æ®åˆ·æ–°æ—¶æ²¡æœ‰åŠ è½½æç¤º

**å‘ç°**ï¼š
```typescript
// âœ… å¥½çš„ç¤ºä¾‹ï¼šDashboard.tsx
if (loading && !kpis) {
  return <div className="animate-pulse">...</div>;
}

// âŒ é—®é¢˜ï¼šéƒ¨åˆ†é¡µé¢åªæœ‰ç®€å•çš„ loading çŠ¶æ€ï¼Œæ²¡æœ‰éª¨æ¶å±
```

**å»ºè®®**ï¼š
- ç»Ÿä¸€åŠ è½½çŠ¶æ€ç»„ä»¶
- ä¸ºæ‰€æœ‰æ•°æ®åˆ—è¡¨æ·»åŠ éª¨æ¶å±
- åŒºåˆ†åˆå§‹åŠ è½½å’Œåˆ·æ–°åŠ è½½

---

### 3. ä»£ç é‡å¤ âš ï¸ **éœ€è¦ä¼˜åŒ–**

**é—®é¢˜**ï¼š
- å¤šä¸ªé¡µé¢æœ‰ç›¸ä¼¼çš„ API è°ƒç”¨æ¨¡å¼
- åˆ†é¡µé€»è¾‘é‡å¤
- ç­›é€‰é€»è¾‘é‡å¤

**å‘ç°**ï¼š
- `Analytics.tsx`ã€`Users.tsx`ã€`Revenue.tsx` éƒ½æœ‰ç›¸ä¼¼çš„åˆ†é¡µé€»è¾‘
- å¤šä¸ªé¡µé¢éƒ½æœ‰ç­›é€‰åŠŸèƒ½ï¼Œä½†å®ç°æ–¹å¼ä¸åŒ

**å»ºè®®**ï¼š
- åˆ›å»ºè‡ªå®šä¹‰ Hookï¼š`usePagination`ã€`useFilter`
- æå–å…¬å…±çš„æ•°æ®è·å–é€»è¾‘
- åˆ›å»ºé€šç”¨çš„è¡¨æ ¼ç»„ä»¶

---

## ğŸš€ æ€§èƒ½ä¼˜åŒ–å»ºè®®

### 1. React Hooks ä¼˜åŒ– âš ï¸ **ä¸­ç­‰ä¼˜å…ˆçº§**

**é—®é¢˜**ï¼š
- éƒ¨åˆ† `useCallback` å’Œ `useMemo` ä½¿ç”¨ä¸å½“
- ä¾èµ–æ•°ç»„å¯èƒ½ä¸å®Œæ•´

**å‘ç°**ï¼š
```typescript
// âš ï¸ é—®é¢˜ï¼šfetchKPIs ä¾èµ–æ•°ç»„ä¸ºç©ºï¼Œä½†ä½¿ç”¨äº†å¤–éƒ¨å˜é‡
const fetchKPIs = useCallback(async () => {
  // ä½¿ç”¨äº† startDate, endDateï¼Œä½†ä¾èµ–æ•°ç»„ä¸ºç©º
}, []); // âŒ åº”è¯¥åŒ…å«ä¾èµ–
```

**å»ºè®®**ï¼š
- å®¡æŸ¥æ‰€æœ‰ `useCallback` å’Œ `useMemo` çš„ä¾èµ–æ•°ç»„
- ä½¿ç”¨ ESLint è§„åˆ™ `exhaustive-deps` æ£€æŸ¥
- ä¼˜åŒ–ä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“

---

### 2. API è¯·æ±‚ä¼˜åŒ– âš ï¸ **é«˜ä¼˜å…ˆçº§**

**é—®é¢˜**ï¼š
- éƒ¨åˆ†é¡µé¢åœ¨ç»„ä»¶æŒ‚è½½æ—¶å‘èµ·å¤šä¸ªç‹¬ç«‹è¯·æ±‚
- æ²¡æœ‰è¯·æ±‚å»é‡æœºåˆ¶
- ç¼ºå°‘è¯·æ±‚ç¼“å­˜

**å‘ç°**ï¼š
```typescript
// âŒ é—®é¢˜ï¼šDashboard.tsx ä¸­å¤šä¸ªç‹¬ç«‹è¯·æ±‚
useEffect(() => {
  fetchKPIs();
  fetchTopHolders();
  fetchUsers();
}, []); // åº”è¯¥åˆå¹¶æˆ–ä½¿ç”¨ Promise.all
```

**å»ºè®®**ï¼š
- åˆå¹¶ç›¸å…³è¯·æ±‚ï¼ˆä½¿ç”¨ `Promise.all`ï¼‰
- æ·»åŠ è¯·æ±‚å»é‡ï¼ˆç›¸åŒè¯·æ±‚ä¸é‡å¤å‘èµ·ï¼‰
- å®ç°ç®€å•çš„è¯·æ±‚ç¼“å­˜ï¼ˆçŸ­æ—¶é—´å†…çš„ç›¸åŒè¯·æ±‚å¤ç”¨ç»“æœï¼‰

---

### 3. ç»„ä»¶æ‡’åŠ è½½ âš ï¸ **ä½ä¼˜å…ˆçº§**

**é—®é¢˜**ï¼š
- æ‰€æœ‰é¡µé¢ç»„ä»¶éƒ½æ˜¯åŒæ­¥åŠ è½½
- åˆå§‹åŒ…ä½“ç§¯è¾ƒå¤§

**å»ºè®®**ï¼š
```typescript
// âœ… å»ºè®®ï¼šä½¿ç”¨ React.lazy æ‡’åŠ è½½é¡µé¢
const Dashboard = React.lazy(() => import('./pages/Dashboard'));
const UsersPage = React.lazy(() => import('./pages/Users'));
```

---

## ğŸ¨ ç”¨æˆ·ä½“éªŒä¼˜åŒ–

### 1. æ•°æ®åˆ·æ–°æœºåˆ¶ âš ï¸ **éœ€è¦æ”¹è¿›**

**é—®é¢˜**ï¼š
- éƒ¨åˆ†é¡µé¢æœ‰è‡ªåŠ¨åˆ·æ–°ï¼Œéƒ¨åˆ†æ²¡æœ‰
- åˆ·æ–°é—´éš”ä¸ç»Ÿä¸€ï¼ˆ15ç§’ã€30ç§’ç­‰ï¼‰
- æ²¡æœ‰æ‰‹åŠ¨åˆ·æ–°æŒ‰é’®

**å‘ç°**ï¼š
```typescript
// Dashboard.tsx: 15ç§’åˆ·æ–°
const interval = setInterval(fetchKPIs, 15000);

// Analytics.tsx: æ²¡æœ‰è‡ªåŠ¨åˆ·æ–°
```

**å»ºè®®**ï¼š
- ç»Ÿä¸€è‡ªåŠ¨åˆ·æ–°ç­–ç•¥ï¼ˆå¯é…ç½®ï¼‰
- æ·»åŠ æ‰‹åŠ¨åˆ·æ–°æŒ‰é’®
- æä¾›åˆ·æ–°å¼€å…³ï¼ˆç”¨æˆ·å¯é€‰æ‹©æ˜¯å¦è‡ªåŠ¨åˆ·æ–°ï¼‰

---

### 2. ç©ºçŠ¶æ€å¤„ç† âš ï¸ **éœ€è¦æ”¹è¿›**

**é—®é¢˜**ï¼š
- éƒ¨åˆ†é¡µé¢ç¼ºå°‘ç©ºçŠ¶æ€æç¤º
- ç©ºçŠ¶æ€æ ·å¼ä¸ç»Ÿä¸€

**å»ºè®®**ï¼š
- åˆ›å»ºç»Ÿä¸€çš„ç©ºçŠ¶æ€ç»„ä»¶
- ä¸ºæ‰€æœ‰åˆ—è¡¨é¡µé¢æ·»åŠ ç©ºçŠ¶æ€
- æä¾›å‹å¥½çš„ç©ºçŠ¶æ€æç¤ºå’Œæ“ä½œå»ºè®®

---

### 3. æ“ä½œåé¦ˆ âš ï¸ **éœ€è¦æ”¹è¿›**

**é—®é¢˜**ï¼š
- éƒ¨åˆ†æ“ä½œç¼ºå°‘æˆåŠŸ/å¤±è´¥åé¦ˆ
- æ“ä½œæŒ‰é’®æ²¡æœ‰åŠ è½½çŠ¶æ€
- è¡¨å•éªŒè¯æç¤ºä¸æ¸…æ™°

**å»ºè®®**ï¼š
- æ‰€æœ‰æ“ä½œéƒ½åº”æœ‰æ˜ç¡®çš„åé¦ˆ
- æ“ä½œæŒ‰é’®æ˜¾ç¤ºåŠ è½½çŠ¶æ€
- è¡¨å•éªŒè¯æä¾›å®æ—¶åé¦ˆ

---

## ğŸ” å®‰å…¨æ€§å®¡æŸ¥

### 1. è®¤è¯æœºåˆ¶ âœ… **è‰¯å¥½**

**ä¼˜ç‚¹**ï¼š
- ä½¿ç”¨ localStorage å­˜å‚¨ç®¡ç†å‘˜å¯†é’¥
- 401 é”™è¯¯è‡ªåŠ¨ç™»å‡º
- ç™»å½•é¡µé¢æœ‰é”™è¯¯æç¤º

**å»ºè®®**ï¼š
- è€ƒè™‘æ·»åŠ å¯†é’¥è¿‡æœŸæœºåˆ¶
- æ·»åŠ æ“ä½œæ—¥å¿—è®°å½•ï¼ˆæ•æ„Ÿæ“ä½œï¼‰

---

### 2. API è¯·æ±‚å®‰å…¨ âœ… **è‰¯å¥½**

**ä¼˜ç‚¹**ï¼š
- ä½¿ç”¨è‡ªå®šä¹‰ header ä¼ é€’å¯†é’¥
- æ”¯æŒ AbortController å–æ¶ˆè¯·æ±‚

**å»ºè®®**ï¼š
- æ·»åŠ è¯·æ±‚ç­¾åï¼ˆé˜²æ­¢é‡æ”¾æ”»å‡»ï¼‰
- è€ƒè™‘ä½¿ç”¨ HTTPS only

---

## ğŸ“± å“åº”å¼è®¾è®¡

### 1. ç§»åŠ¨ç«¯é€‚é… âš ï¸ **éœ€è¦æ”¹è¿›**

**é—®é¢˜**ï¼š
- ä¾§è¾¹æ æœ‰ç§»åŠ¨ç«¯åˆ‡æ¢ï¼Œä½†éƒ¨åˆ†é¡µé¢å†…å®¹åœ¨å°å±å¹•ä¸Šæ˜¾ç¤ºä¸ä½³
- è¡¨æ ¼åœ¨ç§»åŠ¨ç«¯å¯èƒ½æº¢å‡º

**å‘ç°**ï¼š
```typescript
// âœ… å¥½çš„ï¼šLayout.tsx æœ‰ç§»åŠ¨ç«¯èœå•åˆ‡æ¢
const [isSidebarOpen, setIsSidebarOpen] = useState(true);
```

**å»ºè®®**ï¼š
- ä¸ºè¡¨æ ¼æ·»åŠ æ¨ªå‘æ»šåŠ¨
- ä¼˜åŒ–ç§»åŠ¨ç«¯å¡ç‰‡å¸ƒå±€
- æµ‹è¯•å„ç§å±å¹•å°ºå¯¸

---

## ğŸ› ï¸ ä»£ç ç»´æŠ¤æ€§

### 1. ç±»å‹å®šä¹‰ âš ï¸ **éœ€è¦æ”¹è¿›**

**é—®é¢˜**ï¼š
- éƒ¨åˆ†ç±»å‹å®šä¹‰ä¸å®Œæ•´
- API å“åº”ç±»å‹å¯èƒ½ä¸åŒ¹é…

**å»ºè®®**ï¼š
- å®Œå–„æ‰€æœ‰ API å“åº”çš„ç±»å‹å®šä¹‰
- ä½¿ç”¨ Zod æˆ–ç±»ä¼¼åº“éªŒè¯ API å“åº”
- ç”Ÿæˆç±»å‹å®šä¹‰æ–‡æ¡£

---

### 2. ä»£ç æ³¨é‡Š âš ï¸ **éœ€è¦æ”¹è¿›**

**é—®é¢˜**ï¼š
- å¤æ‚é€»è¾‘ç¼ºå°‘æ³¨é‡Š
- API å‡½æ•°ç¼ºå°‘ JSDoc æ³¨é‡Š

**å»ºè®®**ï¼š
- ä¸ºå¤æ‚å‡½æ•°æ·»åŠ  JSDoc æ³¨é‡Š
- è§£é‡Šä¸šåŠ¡é€»è¾‘çš„å…³é”®æ­¥éª¤
- æ·»åŠ  TODO æ ‡è®°å¾…ä¼˜åŒ–é¡¹

---

## ğŸ“ å…·ä½“ä¼˜åŒ–å»ºè®®æ¸…å•

### ğŸ”´ é«˜ä¼˜å…ˆçº§ï¼ˆå½±å“ç”¨æˆ·ä½“éªŒï¼‰

1. **ç»Ÿä¸€é”™è¯¯å¤„ç†æœºåˆ¶**
   - [ ] åˆ›å»ºå…¨å±€é”™è¯¯è¾¹ç•Œç»„ä»¶
   - [ ] ç»Ÿä¸€ä½¿ç”¨ `useNotifications` æ˜¾ç¤ºé”™è¯¯
   - [ ] åŒºåˆ†é”™è¯¯ç±»å‹ï¼Œæä¾›é’ˆå¯¹æ€§æç¤º

2. **ä¼˜åŒ– API è¯·æ±‚**
   - [ ] åˆå¹¶ç›¸å…³è¯·æ±‚ï¼ˆä½¿ç”¨ Promise.allï¼‰
   - [ ] æ·»åŠ è¯·æ±‚å»é‡æœºåˆ¶
   - [ ] å®ç°ç®€å•çš„è¯·æ±‚ç¼“å­˜

3. **æ”¹è¿›åŠ è½½çŠ¶æ€**
   - [ ] åˆ›å»ºç»Ÿä¸€çš„åŠ è½½ç»„ä»¶
   - [ ] ä¸ºæ‰€æœ‰åˆ—è¡¨æ·»åŠ éª¨æ¶å±
   - [ ] åŒºåˆ†åˆå§‹åŠ è½½å’Œåˆ·æ–°åŠ è½½

---

### ğŸŸ¡ ä¸­ä¼˜å…ˆçº§ï¼ˆæå‡ä»£ç è´¨é‡ï¼‰

4. **å‡å°‘ä»£ç é‡å¤**
   - [ ] åˆ›å»º `usePagination` Hook
   - [ ] åˆ›å»º `useFilter` Hook
   - [ ] æå–å…¬å…±çš„è¡¨æ ¼ç»„ä»¶

5. **ä¼˜åŒ– React Hooks**
   - [ ] å®¡æŸ¥æ‰€æœ‰ `useCallback` ä¾èµ–æ•°ç»„
   - [ ] ä¼˜åŒ–ä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“
   - [ ] ä½¿ç”¨ React DevTools åˆ†ææ€§èƒ½

6. **ç»Ÿä¸€æ•°æ®åˆ·æ–°æœºåˆ¶**
   - [ ] åˆ›å»º `useAutoRefresh` Hook
   - [ ] ç»Ÿä¸€åˆ·æ–°é—´éš”é…ç½®
   - [ ] æ·»åŠ æ‰‹åŠ¨åˆ·æ–°æŒ‰é’®

---

### ğŸŸ¢ ä½ä¼˜å…ˆçº§ï¼ˆé•¿æœŸä¼˜åŒ–ï¼‰

7. **ç»„ä»¶æ‡’åŠ è½½**
   - [ ] ä½¿ç”¨ React.lazy æ‡’åŠ è½½é¡µé¢ç»„ä»¶
   - [ ] æ·»åŠ  Suspense å’ŒåŠ è½½çŠ¶æ€

8. **å®Œå–„ç±»å‹å®šä¹‰**
   - [ ] å®Œå–„æ‰€æœ‰ API å“åº”ç±»å‹
   - [ ] ä½¿ç”¨ Zod éªŒè¯ API å“åº”

9. **æ”¹è¿›ç§»åŠ¨ç«¯é€‚é…**
   - [ ] ä¼˜åŒ–è¡¨æ ¼åœ¨ç§»åŠ¨ç«¯çš„æ˜¾ç¤º
   - [ ] æµ‹è¯•å„ç§å±å¹•å°ºå¯¸

10. **æ·»åŠ ä»£ç æ³¨é‡Š**
    - [ ] ä¸ºå¤æ‚å‡½æ•°æ·»åŠ  JSDoc
    - [ ] è§£é‡Šå…³é”®ä¸šåŠ¡é€»è¾‘

---

## ğŸ“Š ä»£ç ç»Ÿè®¡

- **é¡µé¢ç»„ä»¶**: 12 ä¸ª
- **å¯å¤ç”¨ç»„ä»¶**: 3 ä¸ª
- **API å‡½æ•°**: ~30 ä¸ª
- **Hooks ä½¿ç”¨**: 133 å¤„ï¼ˆuseState, useEffect, useCallback ç­‰ï¼‰
- **é”™è¯¯å¤„ç†**: 16 å¤„ try-catch
- **æ§åˆ¶å°æ—¥å¿—**: 49 å¤„

---

## ğŸ¯ æ€»ç»“

### ä¼˜ç‚¹ âœ…

1. ä»£ç ç»“æ„æ¸…æ™°ï¼Œç»„ç»‡è‰¯å¥½
2. æŠ€æœ¯æ ˆé€‰æ‹©åˆç†
3. æœ‰åŸºæœ¬çš„é”™è¯¯å¤„ç†å’ŒåŠ è½½çŠ¶æ€
4. è®¤è¯æœºåˆ¶å®Œå–„

### éœ€è¦æ”¹è¿› âš ï¸

1. **é”™è¯¯å¤„ç†ä¸ç»Ÿä¸€** - éœ€è¦å…¨å±€é”™è¯¯è¾¹ç•Œå’Œç»Ÿä¸€çš„é€šçŸ¥æœºåˆ¶
2. **API è¯·æ±‚å¯ä¼˜åŒ–** - åˆå¹¶è¯·æ±‚ã€æ·»åŠ ç¼“å­˜ã€å»é‡
3. **ä»£ç é‡å¤** - æå–å…¬å…±é€»è¾‘å’Œç»„ä»¶
4. **åŠ è½½çŠ¶æ€ä¸ä¸€è‡´** - ç»Ÿä¸€åŠ è½½ç»„ä»¶å’Œéª¨æ¶å±
5. **ç§»åŠ¨ç«¯é€‚é…** - ä¼˜åŒ–å°å±å¹•æ˜¾ç¤º

### ä¼˜å…ˆçº§å»ºè®®

1. **ç«‹å³ä¿®å¤**ï¼ˆæœ¬å‘¨ï¼‰ï¼š
   - ç»Ÿä¸€é”™è¯¯å¤„ç†æœºåˆ¶
   - ä¼˜åŒ– API è¯·æ±‚ï¼ˆåˆå¹¶ã€å»é‡ï¼‰

2. **çŸ­æœŸä¼˜åŒ–**ï¼ˆæœ¬æœˆï¼‰ï¼š
   - å‡å°‘ä»£ç é‡å¤
   - æ”¹è¿›åŠ è½½çŠ¶æ€
   - ç»Ÿä¸€æ•°æ®åˆ·æ–°æœºåˆ¶

3. **é•¿æœŸä¼˜åŒ–**ï¼ˆåç»­ï¼‰ï¼š
   - ç»„ä»¶æ‡’åŠ è½½
   - å®Œå–„ç±»å‹å®šä¹‰
   - æ”¹è¿›ç§»åŠ¨ç«¯é€‚é…

---

---

## ğŸ’¡ è¯¦ç»†ä¼˜åŒ–æ–¹æ¡ˆ

### æ–¹æ¡ˆ 1: åˆ›å»ºå…¨å±€é”™è¯¯è¾¹ç•Œç»„ä»¶

**æ–‡ä»¶**: `components/ErrorBoundary.tsx`

```typescript
import React, { Component, ErrorInfo, ReactNode } from 'react';
import { AlertCircle, RefreshCw } from 'lucide-react';

interface Props {
  children: ReactNode;
}

interface State {
  hasError: boolean;
  error: Error | null;
}

class ErrorBoundary extends Component<Props, State> {
  constructor(props: Props) {
    super(props);
    this.state = { hasError: false, error: null };
  }

  static getDerivedStateFromError(error: Error): State {
    return { hasError: true, error };
  }

  componentDidCatch(error: Error, errorInfo: ErrorInfo) {
    console.error('ErrorBoundary caught an error:', error, errorInfo);
  }

  handleReset = () => {
    this.setState({ hasError: false, error: null });
    window.location.reload();
  };

  render() {
    if (this.state.hasError) {
      return (
        <div className="min-h-screen flex items-center justify-center bg-[#09090b] p-6">
          <div className="max-w-md w-full bg-zinc-900 border border-red-500/20 rounded-2xl p-6">
            <div className="flex items-center gap-3 mb-4">
              <AlertCircle className="text-red-400" size={24} />
              <h2 className="text-xl font-bold text-red-400">å‡ºç°é”™è¯¯</h2>
            </div>
            <p className="text-zinc-400 mb-4">
              {this.state.error?.message || 'å‘ç”Ÿäº†æœªçŸ¥é”™è¯¯'}
            </p>
            <button
              onClick={this.handleReset}
              className="w-full flex items-center justify-center gap-2 px-4 py-2 bg-emerald-500 hover:bg-emerald-400 text-white rounded-lg transition-colors"
            >
              <RefreshCw size={16} />
              é‡æ–°åŠ è½½é¡µé¢
            </button>
          </div>
        </div>
      );
    }

    return this.props.children;
  }
}

export default ErrorBoundary;
```

**ä½¿ç”¨æ–¹å¼**:
```typescript
// App.tsx
import ErrorBoundary from './components/ErrorBoundary';

<ErrorBoundary>
  <Router>...</Router>
</ErrorBoundary>
```

---

### æ–¹æ¡ˆ 2: åˆ›å»ºç»Ÿä¸€çš„åŠ è½½ç»„ä»¶

**æ–‡ä»¶**: `components/Loading.tsx`

```typescript
import React from 'react';

interface LoadingProps {
  type?: 'spinner' | 'skeleton' | 'dots';
  message?: string;
}

export const Loading: React.FC<LoadingProps> = ({ 
  type = 'spinner', 
  message = 'åŠ è½½ä¸­...' 
}) => {
  if (type === 'skeleton') {
    return (
      <div className="animate-pulse space-y-4">
        <div className="h-32 bg-zinc-900 rounded-xl border border-zinc-800" />
        <div className="h-32 bg-zinc-900 rounded-xl border border-zinc-800" />
      </div>
    );
  }

  return (
    <div className="flex flex-col items-center justify-center p-8">
      <div className="animate-spin rounded-full h-8 w-8 border-b-2 border-emerald-500 mb-4" />
      <p className="text-zinc-400 text-sm">{message}</p>
    </div>
  );
};

// è¡¨æ ¼éª¨æ¶å±
export const TableSkeleton: React.FC<{ rows?: number }> = ({ rows = 5 }) => {
  return (
    <div className="animate-pulse space-y-3">
      {Array.from({ length: rows }).map((_, i) => (
        <div key={i} className="h-12 bg-zinc-900 rounded-lg border border-zinc-800" />
      ))}
    </div>
  );
};
```

---

### æ–¹æ¡ˆ 3: åˆ›å»º usePagination Hook

**æ–‡ä»¶**: `hooks/usePagination.ts`

```typescript
import { useState, useCallback } from 'react';

interface UsePaginationOptions {
  pageSize?: number;
  initialPage?: number;
}

export function usePagination(options: UsePaginationOptions = {}) {
  const { pageSize = 50, initialPage = 1 } = options;
  const [page, setPage] = useState(initialPage);
  const [total, setTotal] = useState(0);

  const totalPages = Math.ceil(total / pageSize);
  const offset = (page - 1) * pageSize;

  const goToPage = useCallback((newPage: number) => {
    if (newPage >= 1 && newPage <= totalPages) {
      setPage(newPage);
    }
  }, [totalPages]);

  const nextPage = useCallback(() => {
    if (page < totalPages) setPage(p => p + 1);
  }, [page, totalPages]);

  const prevPage = useCallback(() => {
    if (page > 1) setPage(p => p - 1);
  }, [page]);

  const reset = useCallback(() => {
    setPage(initialPage);
    setTotal(0);
  }, [initialPage]);

  return {
    page,
    pageSize,
    total,
    totalPages,
    offset,
    setTotal,
    goToPage,
    nextPage,
    prevPage,
    reset,
    hasNext: page < totalPages,
    hasPrev: page > 1,
  };
}
```

**ä½¿ç”¨ç¤ºä¾‹**:
```typescript
const pagination = usePagination({ pageSize: 50 });

const fetchData = async () => {
  const data = await getVisitStats({
    limit: pagination.pageSize,
    offset: pagination.offset,
  });
  pagination.setTotal(data.total);
  setVisits(data.items);
};
```

---

### æ–¹æ¡ˆ 4: åˆ›å»º useAutoRefresh Hook

**æ–‡ä»¶**: `hooks/useAutoRefresh.ts`

```typescript
import { useEffect, useRef, useCallback } from 'react';

interface UseAutoRefreshOptions {
  enabled?: boolean;
  interval?: number; // æ¯«ç§’
  onRefresh: () => void | Promise<void>;
}

export function useAutoRefresh(options: UseAutoRefreshOptions) {
  const { enabled = true, interval = 30000, onRefresh } = options;
  const intervalRef = useRef<NodeJS.Timeout | null>(null);
  const isRefreshingRef = useRef(false);

  const refresh = useCallback(async () => {
    if (isRefreshingRef.current) return;
    isRefreshingRef.current = true;
    try {
      await onRefresh();
    } finally {
      isRefreshingRef.current = false;
    }
  }, [onRefresh]);

  useEffect(() => {
    if (!enabled) {
      if (intervalRef.current) {
        clearInterval(intervalRef.current);
        intervalRef.current = null;
      }
      return;
    }

    // ç«‹å³æ‰§è¡Œä¸€æ¬¡
    refresh();

    // è®¾ç½®å®šæ—¶åˆ·æ–°
    intervalRef.current = setInterval(refresh, interval);

    return () => {
      if (intervalRef.current) {
        clearInterval(intervalRef.current);
      }
    };
  }, [enabled, interval, refresh]);

  return { refresh, isRefreshing: isRefreshingRef.current };
}
```

**ä½¿ç”¨ç¤ºä¾‹**:
```typescript
const { refresh } = useAutoRefresh({
  enabled: true,
  interval: 15000,
  onRefresh: fetchKPIs,
});
```

---

### æ–¹æ¡ˆ 5: API è¯·æ±‚ä¼˜åŒ–ï¼ˆåˆå¹¶å’Œå»é‡ï¼‰

**æ–‡ä»¶**: `lib/apiCache.ts`

```typescript
// ç®€å•çš„è¯·æ±‚ç¼“å­˜å’Œå»é‡
const requestCache = new Map<string, { data: any; timestamp: number }>();
const pendingRequests = new Map<string, Promise<any>>();
const CACHE_TTL = 5000; // 5ç§’ç¼“å­˜

export async function cachedFetch<T>(
  key: string,
  fetcher: () => Promise<T>
): Promise<T> {
  // æ£€æŸ¥ç¼“å­˜
  const cached = requestCache.get(key);
  if (cached && Date.now() - cached.timestamp < CACHE_TTL) {
    return cached.data;
  }

  // æ£€æŸ¥æ˜¯å¦æœ‰æ­£åœ¨è¿›è¡Œçš„ç›¸åŒè¯·æ±‚
  const pending = pendingRequests.get(key);
  if (pending) {
    return pending;
  }

  // å‘èµ·æ–°è¯·æ±‚
  const promise = fetcher().then(data => {
    requestCache.set(key, { data, timestamp: Date.now() });
    pendingRequests.delete(key);
    return data;
  }).catch(error => {
    pendingRequests.delete(key);
    throw error;
  });

  pendingRequests.set(key, promise);
  return promise;
}
```

**ä½¿ç”¨ç¤ºä¾‹**:
```typescript
// åˆå¹¶å¤šä¸ªè¯·æ±‚
const fetchDashboardData = async () => {
  const [kpis, holders, users] = await Promise.all([
    cachedFetch('kpis', getAdminKPIs),
    cachedFetch('holders', () => getTopRATHolders(5)),
    cachedFetch('users', () => getAdminUserList({ limit: 10 })),
  ]);
  return { kpis, holders, users };
};
```

---

## ğŸ¨ UI/UX ä¼˜åŒ–å»ºè®®

### 1. ç©ºçŠ¶æ€ç»„ä»¶

**æ–‡ä»¶**: `components/EmptyState.tsx`

```typescript
import React from 'react';
import { Inbox, Search } from 'lucide-react';

interface EmptyStateProps {
  icon?: React.ReactNode;
  title: string;
  description?: string;
  action?: React.ReactNode;
}

export const EmptyState: React.FC<EmptyStateProps> = ({
  icon = <Inbox size={48} />,
  title,
  description,
  action,
}) => {
  return (
    <div className="flex flex-col items-center justify-center py-12 px-4">
      <div className="text-zinc-500 mb-4">{icon}</div>
      <h3 className="text-lg font-semibold text-zinc-300 mb-2">{title}</h3>
      {description && (
        <p className="text-sm text-zinc-500 text-center max-w-md mb-4">
          {description}
        </p>
      )}
      {action && <div className="mt-4">{action}</div>}
    </div>
  );
};
```

---

### 2. ç»Ÿä¸€çš„æ“ä½œæŒ‰é’®ç»„ä»¶

**æ–‡ä»¶**: `components/ActionButton.tsx`

```typescript
import React from 'react';
import { Loader2 } from 'lucide-react';

interface ActionButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {
  loading?: boolean;
  variant?: 'primary' | 'danger' | 'secondary';
}

export const ActionButton: React.FC<ActionButtonProps> = ({
  loading = false,
  variant = 'primary',
  children,
  disabled,
  className = '',
  ...props
}) => {
  const baseStyles = 'px-4 py-2 rounded-lg font-medium transition-all disabled:opacity-50 disabled:cursor-not-allowed';
  const variants = {
    primary: 'bg-emerald-500 hover:bg-emerald-400 text-white',
    danger: 'bg-red-500 hover:bg-red-400 text-white',
    secondary: 'bg-zinc-800 hover:bg-zinc-700 text-zinc-300',
  };

  return (
    <button
      {...props}
      disabled={disabled || loading}
      className={`${baseStyles} ${variants[variant]} ${className}`}
    >
      {loading ? (
        <span className="flex items-center gap-2">
          <Loader2 size={16} className="animate-spin" />
          å¤„ç†ä¸­...
        </span>
      ) : (
        children
      )}
    </button>
  );
};
```

---

## ğŸ“± å“åº”å¼ä¼˜åŒ–

### è¡¨æ ¼å“åº”å¼å¤„ç†

```typescript
// ä¸ºè¡¨æ ¼æ·»åŠ æ¨ªå‘æ»šåŠ¨å®¹å™¨
<div className="overflow-x-auto -mx-6 px-6">
  <table className="w-full min-w-[800px]">
    {/* è¡¨æ ¼å†…å®¹ */}
  </table>
</div>
```

---

## ğŸ” æ€§èƒ½ç›‘æ§å»ºè®®

### æ·»åŠ æ€§èƒ½ç›‘æ§

```typescript
// utils/performance.ts
export function measurePerformance(name: string, fn: () => void) {
  if (import.meta.env.DEV) {
    const start = performance.now();
    fn();
    const end = performance.now();
    console.log(`[Performance] ${name}: ${(end - start).toFixed(2)}ms`);
  } else {
    fn();
  }
}
```

---

**æŠ¥å‘Šç”Ÿæˆæ—¶é—´**: 2025-01-XX  
**å®¡æŸ¥äºº**: Cursor AI Assistant  
**ä¸‹æ¬¡å®¡æŸ¥å»ºè®®**: ä¼˜åŒ–å®æ–½å 1 ä¸ªæœˆ

